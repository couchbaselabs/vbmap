<html>
  <head>
    <title>Cluster VBucket Distribution</title>
    <script type="text/javascript" src="/d3.js"></script>
    <script type="text/javascript" src="/vbmap.js"></script>
    <script type="text/javascript" src="/map?name=server_state"></script>
    <style type="text/css">
#replicas, #cluster {
  float: left;
  font: 10px sans-serif;
}

.chord path {
  fill-opacity: .67;
  stroke: #000;
  stroke-width: .5px;
}

.nodes {
  stroke: black;
}

.nodes path {
  fill: grey;
}

.nodes path.bad {
  fill: red;
}

    </style>
  </head>
  <body>
    <div id="center">
      <div id="cluster"></div>
      <div id="replicas"></div>
    </div>
<script type="text/javascript">
 var state = makeState(700, 700, '#cluster');
 var chord = makeChord(700, 700, '#replicas').fill('grey');
 state(server_state);
 chord(server_state);
 setInterval(function() {
   d3.json("/map?rand=" + Math.random(), function(json) {
   if (json != null) {
     state(json);
     chord(json);
   }
 });
 }, 5000);
    </script>
  </body>
</html>
