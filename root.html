<html>
  <head>
    <title>Cluster VBucket Distribution</title>
    <script type="text/javascript" src="/d3.js"></script>
    <script type="text/javascript" src="/vbmap.js"></script>
    <script type="text/javascript" src="/map?name=server_state"></script>
    <style type="text/css">
#replicas, #cluster {
  float: left;
  font: 10px sans-serif;
}

.chord path {
  fill-opacity: .67;
  stroke: #000;
  stroke-width: .5px;
}

.nodes path {
  fill: grey;
}

.nodes path.bad {
  fill: red;
}

    </style>
  </head>
  <body>
    <div id="center">
      <div id="cluster"></div>
      <div id="replicas"></div>
    </div>
<script type="text/javascript">
 drawState(700, 700, server_state, '#cluster');
 makeChord(700, 700, server_state, '#replicas', 'grey');
 setInterval(function() {
   d3.json("/map", function(json) {
   if (json != null) {
     d3.select("#cluster svg").remove();
     drawState(700, 700, json, '#cluster');
     d3.select("#replicas svg").remove();
     makeChord(700, 700, json, '#replicas', 'grey');
   }
 });
 }, 5000);
    </script>
  </body>
</html>
